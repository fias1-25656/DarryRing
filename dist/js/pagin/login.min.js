require(["config"],function(){require(["jquery","jquery.swiper","jquery.cookie"],function(e){e(function(){new Swiper(".swiper-container",{pagination:".swiper-pagination",paginationClickable:!0,effect:"fade",loop:!0,autoplay:3e3,speed:1e3,paginationBulletRender:function(){return'<span class="swiper-pagination-bullet"><i></i></span>'}});var r={id:"",pwd:""},i=!1,o=!1;if(e("#username").blur(function(){if(r.id=this.value,r.id){var o=e(this);e.ajax({type:"get",url:"json/user.json",success:function(s){s.filter(function(e){return e.id==r.id}).length?(e(".errormsg").hide(),o.removeClass("error"),i=!0):(o.addClass("error"),e(".errormsg").text("账户不存在，请重新输入").show(),i=!1)}})}else e(".errormsg").text("请输入邮箱或手机号").show()}),e("#pwd").blur(function(){if(r.pwd=this.value,r.pwd){var i=e(this);e.ajax({type:"get",url:"json/user.json",success:function(s){s.filter(function(e){return e.pwd==r.pwd&&e.id==r.id}).length?(e(".errormsg").hide(),i.removeClass("error"),o=!0):(i.addClass("error"),e(".errormsg").text("用户名或密码输入错误，请重新输入").show(),o=!1)}})}else e(".errormsg").text("请输入密码").show()}),e.cookie("user")){var s=JSON.parse(e.cookie("user"));console.log(s),r.id=s.id,r.pwd=s.pwd,e("#username").attr("value",r.id),e("#pwd").attr("value",r.pwd),i=!0,o=!0}e("#loginBtn").click(function(){i?o?e("#remember").prop("checked")||e.cookie("user")?(e.cookie("user",JSON.stringify(r),{expires:7,path:"/"}),setTimeout(function(){history.go(-1)},1e3)):e.cookie("user",JSON.stringify(r),{path:"/"}):e(".errormsg").text("密码输入错误，请重新输入").show():e(".errormsg").text("邮箱或手机号输入错误，请重新输入").show()})})})});